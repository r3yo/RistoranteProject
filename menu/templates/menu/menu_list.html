{% extends "base.html" %}
{% load static %}

{% block title %}Menu{% endblock %}

{% block content %}
    <div class="container mt-4">

        <h1 class="mb-4 text-center">Menu</h1>

        {% include "menu/includes/dish_filters.html" %}

        {% for category in categories %}
            <div class="d-flex align-items-center mt-4">
                <h2 class="me-3 mb-0">{{ category }}</h2>
                {% if "Managers" in user.groups.all.0.name %}
                    <a href="{% url 'menu:update-category' category.pk %}" class="btn btn-primary btn-sm ml-2 mr-2">Edit</a>
                    <a href="{% url 'menu:delete-category' category.pk %}" class="btn btn-danger btn-sm">Delete</a>
                {% endif %}
            </div>
            <div class="dishes-container">
                {% for dish in category.dishes.all %}
                    {% include "menu/includes/base_dish_row.html" with dish=dish show_description=False allow_realign=True show_view_button=True style="list" forloop=forloop %}
                {% empty %}
                    <p>No dishes in this category yet.</p>
                {% endfor %}
            </div>


        {% empty %}
            <p>No menu categories found.</p>
        {% endfor %}
    </div>

    <script src="{% static 'menu/js/dish_sort.js' %}"></script>
{% endblock %}